services:
  activiti:
    image: vincenzoferme/wfms:activiti_5.21.0_conf
    ports:
    - 127.0.0.1:8080:8080
    command: bash -c "sleep 60 && sed -i s/create.demo.models=true/create.demo.models=false/g /opt/tomcat/webapps/activiti-explorer/WEB-INF/classes/engine.properties && sed -i s/create.demo.reports=true/create.demo.reports=false/g /opt/tomcat/webapps/activiti-explorer/WEB-INF/classes/engine.properties && sed -i s/create.demo.definitions=true/create.demo.definitions=false/g /opt/tomcat/webapps/activiti-explorer/WEB-INF/classes/engine.properties && /assets/init"
    container_name: activiti_BenchFlow.ParallelMultiple11Activiti5210.12.1
    network_mode: host
    environment:
    - DB_NAME=activiti_production
    - DB_TYPE=mysql
    - DB_HOST=127.0.0.1
    - DB_PASS=password
    - constraint:node==grid
    - DB_USER=user
    - DB_PORT=3306
  benchflow.monitor.mysql.db.querymysql:
    image: benchflow/monitors:querymysql_dev
    ports:
    - 127.0.0.1::8080
    container_name: benchflow.monitor.mysql.db.querymysql_BenchFlow.ParallelMultiple11Activiti5210.12.1
    network_mode: bridge
    environment:
    - MYSQL_USER_PASSWORD=password
    - BENCHFLOW_MONITOR_NAME=querymysql
    - MYSQL_HOST=127.0.0.1
    - MYSQL_USER=user
    - BENCHFLOW_CONTAINER_NAME=benchflow.monitor.mysql.db.querymysql_BenchFlow.ParallelMultiple11Activiti5210.12.1
    - constraint:node==grid
    - MYSQL_PORT=3306
    - BENCHFLOW_DATA_NAME=querymysql
    - MYSQL_DB_NAME=activiti_production
    expose:
    - 8080
  db:
    image: mysql:5.7.17
    ports:
    - 127.0.0.1:3306:3306
    container_name: db_BenchFlow.ParallelMultiple11Activiti5210.12.1
    network_mode: host
    environment:
    - MYSQL_DATABASE=activiti_production
    - MYSQL_PASSWORD=password
    - MYSQL_USER=user
    - MYSQL_ROOT_PASSWORD=root_password
    - constraint:node==grid
  benchflow.monitor.mysql.db.cpu:
    image: benchflow/monitors:cpu_dev
    ports:
    - 127.0.0.1::8080
    container_name: benchflow.monitor.mysql.db.cpu_BenchFlow.ParallelMultiple11Activiti5210.12.1
    network_mode: bridge
    environment:
    - MYSQL_USER_PASSWORD=password
    - BENCHFLOW_MONITOR_NAME=cpu
    - MYSQL_HOST=127.0.0.1
    - MYSQL_USER=user
    - BENCHFLOW_CONTAINER_NAME=benchflow.monitor.mysql.db.cpu_BenchFlow.ParallelMultiple11Activiti5210.12.1
    - constraint:node==grid
    - MYSQL_PORT=3306
    - BENCHFLOW_DATA_NAME=cpu
    - MYSQL_DB_NAME=activiti_production
    expose:
    - 8080
  benchflow.collector.mysql.db:
    image: benchflow/collectors:mysql_dev
    ports:
    - 127.0.0.1::8080
    container_name: benchflow.collector.mysql.db_BenchFlow.ParallelMultiple11Activiti5210.12.1
    network_mode: bridge
    environment:
    - SUT_NAME=activiti
    - SUT_VERSION=5.21.0
    - BENCHFLOW_EXPERIMENT_ID=BenchFlow.ParallelMultiple11Activiti5210.12
    - MYSQL_USER_PASSWORD=user
    - MINIO_SECRETACCESSKEY=secret_key
    - KAFKA_PORT=9092
    - MYSQL_HOST=127.0.0.1
    - MYSQL_USER=user
    - BENCHFLOW_CONTAINER_NAME=benchflow.collector.mysql.db_BenchFlow.ParallelMultiple11Activiti5210.12.1
    - BENCHFLOW_COLLECTOR_NAME=mysql
    - MINIO_PORT=9000
    - constraint:node==grid
    - MYSQL_PORT=3306
    - BENCHFLOW_TRIAL_ID=BenchFlow.ParallelMultiple11Activiti5210.12.1
    - KAFKA_TOPIC=mysql
    - MINIO_HOST=127.0.0.1
    - TABLE_NAMES=ACT_HI_PROCINST,ACT_HI_ACTINST
    - BENCHFLOW_DATA_NAME=mysql
    - MYSQL_DB_NAME=activiti_production
    - KAFKA_HOST=127.0.0.1
    - MINIO_ACCESSKEYID=access_id
    expose:
    - 8080
version: '2'
