###############################################################################
# BenchFlow Test Definition
###############################################################################
version: v1
name: WfMSTest
description: A WfMS test

###############################################################################
# Test Configuration
###############################################################################
configuration:
  goal:
    type: load
#    observation: cpu

#    exploration_space:
#      camunda:
#        environment:
#          camundaParameter:
#            values: [ "a", "b", "c" ]


  users: 10

  workload_execution:
     rampUp: 0
     steadyState: 60
     rampDown: 0

#  strategy:

  termination_criteria:
    exploration:
      type: fixed
      number: 1

    experiment:
      type: fixed
      number: 3

###############################################################################
# SUT Info Section
###############################################################################
sut:
  name: camunda
  version: 3.5.0
  type: WfMS

  configuration:
    target_service:
      name: camunda
      endpoint: /engine-rest
      sut_ready_log_check: bla

    deployment:
      camunda: bull
      db: lisa1

###############################################################################
# Workload Modeling Section
# this is specific to the SUT type
###############################################################################
workload:
  test-load:
    type: start
    operations:
      - myModel.bpmn

    mix:
      fixedSequence: [ myModel ]

    failure_criteria:
      max_deviation: 5%

###############################################################################
# Data Collection Section
###############################################################################

data_collection:
  client_side:
    faban:
      max_run_time: 6
      interval: 2
      workload_name:
        interval: 30

  server_side:
    camunda: stats

    db:
      mysql:
        environment:
          MYSQL_DB_NAME: process-engine
          MYSQL_USER: camunda
          MYSQL_USER_PASSWORD: camunda
          TABLE_NAMES: ACT_HI_PROCINST,ACT_HI_ACTINST
          MYSQL_PORT: 3306
          MY_MONITOR_QUERY: complete
