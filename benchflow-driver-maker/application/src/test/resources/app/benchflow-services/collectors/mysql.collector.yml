mysql:
  image: benchflow/collectors:mysql_dev
  environment:
  - BENCHFLOW_DATA_NAME=mysql
  - KAFKA_TOPIC=mysql

  - MINIO_HOST=http://${BENCHFLOW_ENV_MINIO_IP}
  - MINIO_PORT=${BENCHFLOW_ENV_MINIO_PORT}
  - MINIO_ACCESSKEYID=${BENCHFLOW_ENV_MINIO_ACCESS_KEY}
  - MINIO_SECRETACCESSKEY=${BENCHFLOW_ENV_MINIO_SECRET_KEY}

  - MYSQL_DB_NAME=${BENCHFLOW_BENCHMARK_CONFIG_MYSQL_DB_NAME}
  - TABLE_NAMES=${BENCHFLOW_BENCHMARK_CONFIG_TABLE_NAMES}

  - MYSQL_HOST=${BENCHFLOW_BENCHMARK_BOUNDSERVICE_IP}
  - MYSQL_PORT=${BENCHFLOW_BENCHMARK_CONFIG_MYSQL_PORT}
  - MYSQL_USER=${BENCHFLOW_BENCHMARK_CONFIG_MYSQL_USER}
  - MYSQL_USER_PASSWORD=${BENCHFLOW_BENCHMARK_CONFIG_MYSQL_USER_PASSWORD}

  expose:
  - 8080
  ports:
  - '8080'
  volumes_from:
  - ${BENCHFLOW_BOUNDSERVICE_VOLUMES}


endpoints:
  stop: /store

dependencies:
  monitors:
  - cpu
  - querymysql
